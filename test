using System;
using System.IO;
using Microsoft.SqlServer.Dts.Runtime;

public void Main()
{
    try
    {
        string sourceDir = Dts.Variables["User::SourceDirectory"].Value.ToString();
        string filePattern = "abc*";

        bool fileExists = false;

        if (Directory.Exists(sourceDir))
        {
            string[] files = Directory.GetFiles(sourceDir, filePattern);

            if (files.Length > 0)
            {
                fileExists = true;
            }
        }

        Dts.Variables["User::is_file"].Value = fileExists;
        Dts.TaskResult = (int)ScriptResults.Success;
    }
    catch (Exception ex)
    {
        // Optional: log error
        Dts.Events.FireError(0, "File Check Script", ex.Message, "", 0);
        Dts.TaskResult = (int)ScriptResults.Failure;
    }
}
